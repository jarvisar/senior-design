<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<!-- Input Bar -->
<div class="inputbar" id="inputbar" *ngIf="facilityData.length > 1" [@inOutAnimation]>
  
  <!-- Host Name Input -->
  <input (click)="selected ? doNothing() : loadOptions()" class="hostname_select" id="hostname_select" type="search" list="hostlist" 
    [(ngModel)]="selectedHost" onfocus="this.placeholder=''" onBlur="this.placeholder='Host Name'"
    [placeholder]="(loadingService.isLoading$ | async) && loading ? 'Loading' : 'Host Name'">  
  <datalist id="hostlist">
    <option *ngFor="let host of hostData">
      {{host}}
    </option>
  </datalist>

  <!-- Discovery Method Select -->
  <select class="method_select" id="method_select"  [(ngModel)]="selectedMethod">
    <option *ngFor="let _ of methodData; index as i" [value]="i">
      {{methodData[i]}}
    </option>
    <label>Method Select</label>
  </select>

  <!-- Discovery Year Select -->
  <select class="year_select" id="year_select"  [(ngModel)]="selectedYear">
    <option *ngFor="let _ of yearData; index as i" [value]="i">
      {{yearData[i]}}
    </option>
    <label>Year Select</label>
  </select>

  <!-- Discovery Facility Select -->
  <select class="facility_select" id="facility_select"  [(ngModel)]="selectedFacility">
    <option *ngFor="let _ of facilityData; index as i" [value]="i">
      {{facilityData[i]}}
    </option>
    <label>Facility Select</label>
  </select>

  <!-- Search, Clear, & Help Buttons -->
  <button mat-raised-button class="search_button" id="search_button" color="primary" style="text-align: center" (click)="searchclick($event)" [disabled]="(loadingService.isLoading$ | async) && previousQueries.length == 0" >Search</button>

  <button mat-raised-button class="clear_button" id="clear_button" color="primary" (click)="clearclick($event)">Clear</button>

  <button mat-icon-button (click)="helpbox.openDialog()" appearance="outline" style="margin-left: 5px; color: #444;">
    <mat-icon>help</mat-icon>
  </button>
  <mat-checkbox class="additional-inputs-checkbox" [color]="'primary'" [(ngModel)]="additionalInputs" [matTooltip]="'Show Additional Columns'"></mat-checkbox>
  <br>
  <!-- Additional Inputs -->
  <div class="additional-inputs" *ngIf="additionalInputs == true" [@inOutAnimation] style="padding-top: 10px;">
    <input class="pl_bmasse-min-input" id="additional-input" [(ngModel)]="selectedMinMass" onfocus="this.placeholder=''" onBlur="this.placeholder='Min Mass'" [placeholder]="'Min Mass (EM)'">
    <input class="pl_bmasse-max-input" id="additional-input" [(ngModel)]="selectedMaxMass" onfocus="this.placeholder=''" onBlur="this.placeholder='Max Mass'" [placeholder]="'Max Mass (EM)'">
    <input class="pl_rade-min-input" id="additional-input" [(ngModel)]="selectedMinRadius" onfocus="this.placeholder=''" onBlur="this.placeholder='Min Radius (ER)'" [placeholder]="'Min Radius (ER)'">
    <input class="pl_rade-max-input" id="additional-input" [(ngModel)]="selectedMaxRadius" onfocus="this.placeholder=''" onBlur="this.placeholder='Max Radius (ER)'" [placeholder]="'Max Radius (ER)'">
    <input class="pl_dens-min-input" id="additional-input" [(ngModel)]="selectedMinDensity" onfocus="this.placeholder=''" onBlur="this.placeholder='Min Density (g/cm続)'" [placeholder]="'Min Density (g/cm続)'">
    <input class="pl_dens-max-input" id="additional-input" [(ngModel)]="selectedMaxDensity" onfocus="this.placeholder=''" onBlur="this.placeholder='Max Density (g/cm続)'" [placeholder]="'Max Density (g/cm続)'">
    <select class="star-type-select" id="star-type-select"  [(ngModel)]="selectedStarType">
      <option [value]="'Star Type'">Star Type</option>
      <option [value]="'A'">A</option>
      <option [value]="'F'">F</option>
      <option [value]="'G'">G</option>
      <option [value]="'K'">K</option>
      <option [value]="'M'">M</option>
      <label>Star Type Select</label>
    </select>
    <select class="star-num-select" id="star-num-select"  [(ngModel)]="selectedStarNum">
      <option [value]="'# of Stars in System'"># of Stars in System</option>
      <option [value]="'1'">1</option>
      <option [value]="'2'">2</option>
      <option [value]="'3'">3</option>
      <option [value]="'4'">4</option>
      <label># of Stars Select</label>
    </select>
    <select class="planet-num-select" id="planet-num-select"  [(ngModel)]="selectedPlanetNum">
      <option [value]="'# of Planets in System'"># of Planets in System</option>
      <option [value]="'1'">1</option>
      <option [value]="'2'">2</option>
      <option [value]="'3'">3</option>
      <option [value]="'4'">4</option>
      <option [value]="'5'">5</option>
      <option [value]="'6'">6</option>
      <option [value]="'7'">7</option>
      <option [value]="'8'">8</option>
      <label># of Planets Select</label>
    </select>
    <mat-checkbox class="controversial-checkbox" [color]="'primary'" [(ngModel)]="showControversial">Controversial</mat-checkbox>
  </div>
</div>

<!-- Show share & download button if table is visible -->
<button mat-mini-fab *ngIf="showTable && !(loadingService.isLoading$ | async)" (click)="previousSearch($event)" id="previousButton" [disabled]="previousQueries[0] == undefined" [@inOutAnimation] aria-label="Previous Search" title="Previous Search" matTooltipPosition="above" matTooltipShowDelay="3000">
  <mat-icon style="transform: scale(0.9);">restore</mat-icon>
</button>

<button mat-mini-fab *ngIf="exoplanetData.length > 0  && !(loadingService.isLoading$ | async)" (click)="share()" id="shareButton" [@inOutAnimation] aria-label="Copy URL to Clipboard" title="Copy URL to Clipboard" matTooltipPosition="above" matTooltipShowDelay="3000">
  <mat-icon style="transform: scale(0.9);">content_copy</mat-icon>
</button>

<button mat-mini-fab color="primary" *ngIf="exoplanetData.length > 0  && !(loadingService.isLoading$ | async)" (click)="download()" id="downloadButton" [@inOutAnimation] title="Download Data">
  <mat-icon>download</mat-icon>
</button>

<!-- Data Table -->
<div  class="table" *ngIf="showTable" @inOutAnimation [ngStyle]="{'height': additionalInputs ? 'calc(100% - 60px)' : '100%'}">
  <!-- Table Component -->
  <app-table [exoplanetData]="exoplanetData" [numResults]="numResults" *ngIf="showTable && exoplanetData.length != 0" @inOutAnimation></app-table>
  <!-- No Results Text -->
  <div class="no-results" *ngIf="showTable && exoplanetData.length == 0" @inOutAnimation (click)="clearclick($event)">
    <p (mouseenter)="showNewSearch = true" (mouseleave)="showNewSearch = false" class="no-results-text" @inOutAnimation>No Results Found</p>
    <p *ngIf="showNewSearch" class="new-search" @inOutAnimation>click to start a new search</p>
  </div>
  <!-- <p *ngIf="!showTable" class="placeholder-text">Find your new favorite exoplanet!</p> -->
</div>
